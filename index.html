<!DOCTYPE html>

<html>

<head>
    <title>Piano Player</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            background-color: rgb(123, 187, 212);
        }

        .piano-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 80px;
        }

        .piano-row {
            display: flex;
            justify-content: center;
        }

        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        .piano-key {
            width: 100px;
            height: 100px;
            border: 2px solid black;
            text-align: center;
            line-height: 100px;
            margin: 8px;
            border-radius: 20px;
            font-size: 40px;
            background-color: rgb(27, 171, 228);
            cursor: pointer;
            transition: transform 0.1s ease;
            animation: forwards;
            user-select: none; 
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        .piano-key:active {
            background-color: orange;
            transform: scale(0.90);
        }
        .piano-key.keyboard-active {
            background-color: orange;
            transform: scale(0.90);

        }
    </style>
</head>

<body>
    <div class="piano-container">

        <!-- top row -->
        <audio id="sound-C1" preload=" auto">
            <source src="piano-t1.mp3" type="audio/mpeg">
        </audio>
        <audio id="sound-D1" preload=" auto">
            <source src="piano-t2.mp3" type="audio/mpeg">
        </audio>
        <audio id="sound-E1" preload=" auto">
            <source src="piano-t3.mp3" type="audio/mpeg">
        </audio>
        <audio id="sound-F1" preload=" auto">
            <source src="piano-t4.mp3" type="audio/mpeg">
        </audio>
        <audio id="sound-G1" preload=" auto">
            <source src="piano-t5.wav" type="audio/wav">
        </audio>
        <!-- middle row -->
        <audio id="sound-A2" preload=" auto">
            <source src="piano-m1.wav" type="audio/wav">
        </audio>
        <audio id="sound-B2" preload=" auto">
            <source src="piano-m2.wav" type="audio/wav">
        </audio>
        <audio id="sound-C2" preload=" auto">
            <source src="piano-m3.wav" type="audio/wav">
        </audio>
        <audio id="sound-D2" preload=" auto">
            <source src="piano-m4.wav" type="audio/wav">
        </audio>
        <audio id="sound-E2" preload=" auto">
            <source src="piano-m5.wav" type="audio/wav">
        </audio>
        <!-- bottom row -->
        <audio id="sound-F3" preload=" auto">
            <source src="piano-b1.wav" type="audio/wav">
        </audio>
        <audio id="sound-G3" preload=" auto">
            <source src="piano-b2.wav" type="audio/wav">
        </audio>
        <audio id="sound-A3" preload=" auto">
            <source src="piano-b3.wav" type="audio/wav">
        </audio>
        <audio id="sound-B3" preload=" auto">
            <source src="piano-b4.wav" type="audio/wav">
        </audio>
        <audio id="sound-C3" preload=" auto">
            <source src="piano-b5.wav" type="audio/wav">
        </audio>

        <div class="piano-row">
            <div class="piano-key" onmousedown="playNote('C1')" 
            ontouchstart="testTouch('C1', event)">C</div>
            <div class="piano-key" onmousedown="playNote('D1')" 
            ontouchstart="playNoteTouch('D1', event)">D</div>
            <div class="piano-key" onmousedown="playNote('E1')" 
            ontouchstart="playNoteTouch('E1', event)">E</div>
            <div class="piano-key" onmousedown="playNote('F1')" 
            ontouchstart="playNoteTouch('F1', event)">F</div>
            <div class="piano-key" onmousedown="playNote('G1')" 
            ontouchstart="playNoteTouch('G1', event)">G</div>
        </div>
        <div class="piano-row">
            <div class="piano-key" onmousedown="playNote('A2')"
            ontouchstart="playNoteTouch('A2', event)">A</div>
            <div class="piano-key" onmousedown="playNote('B2')"
            ontouchstart="playNoteTouch('B2', event)">B</div>
            <div class="piano-key" onmousedown="playNote('C2')"
            ontouchstart="playNoteTouch('C2', event)">C</div>
            <div class="piano-key" onmousedown="playNote('D2')"
            ontouchstart="playNoteTouch('D2', event)">D</div>
            <div class="piano-key" onmousedown="playNote('E2')"
            ontouchstart="playNoteTouch('E2', event)">E</div>
        </div>
        <div class="piano-row">
            <div class="piano-key" onmousedown="playNote('F3')"
            ontouchstart="playNoteTouch('F3', event)">F</div>
            <div class="piano-key" onmousedown="playNote('G3')"
            ontouchstart="playNoteTouch('G3', event)">G</div>
            <div class="piano-key" onmousedown="playNote('A3')"
            ontouchstart="playNoteTouch('A3', event)">A</div>
            <div class="piano-key" onmousedown="playNote('B3')"
            ontouchstart="playNoteTouch('B3', event)">B</div>
            <div class="piano-key" onmousedown="playNote('C3')"
            ontouchstart="playNoteTouch('C3', event)">C</div>
        </div>
    </div>

    <script>
    function playNote(noteId) {
        console.log("Playing: " + noteId);
        var audio = document.getElementById('sound-' + noteId);
        if (audio) {
            var audioClone = audio.cloneNode(true);
            audioClone.play();
            audio.play();
        } else {
            console.log("No sound file for: " + noteId);
        }
    }


        function playNoteTouch(noteId, event) {
            event.preventDefault();
            playNote(noteId);
}

            var keyMap = {
                'q': 'C1',
                'w': 'D1', 
                'e': 'E1',
                'r': 'F1',
                't': 'G1',
                'a': 'A2',
                's': 'B2', 
                'd': 'C2',
                'f': 'D2',
                'g': 'E2',
                'z': 'F3',
                'x': 'G3',
                'c': 'A3',
                'v': 'B3',
                'b': 'C3'
            };

        document.addEventListener('keydown', function(event) {
            var key = event.key.toLowerCase();
            if (keyMap[key]) {
                event.preventDefault();
                console.log("About to light up a key!");
                playNote(keyMap[key]);
                console.log("Keyboard played: " + key + " -> " + keyMap[key]);
            }
        });
    </script>
</body>

</html>
